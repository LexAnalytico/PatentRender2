snyk for serurity check

Prefer getSession first, then getUser to avoid 
transient null: st { data: s } = await supabase.auth.getSession() 
if (!s?.session) 
    { reset state; return } const u = s.session.user 

This avoids initial null from getUser during hydration.

const { data:s } = await supabase.auth.getSession()
        if (!s?.session) {reset state;  return}
        const u = session.user